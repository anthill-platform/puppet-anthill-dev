#
# Requied on node with Puppet Master
#
# @option editor icon data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyMzczIiB2aWV3Qm94PSIwIDAgMjU2IDI0MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij48cGF0aCBkPSJNMTA0Ljg5OCAxOTMuMjQ5cy0yMy4xMDMgMTcuMTctMzkuMzM3IDEyLjQ4OGMwIDAgNzkuOTIyIDc5LjkyMiAxNjIuOTY2IDMuMTIyIDAgMCAyNy43ODUtMzIuMTU3IDI2LjUzNi01NS44ODNsLTEwLjkyNi0zLjEyMnMtMTUuMjk4IDc1LjU1LTk1LjIyIDY2LjE4NWMuMzEyLjMxMi0xOS45OC00LjM3LTQ0LjAyLTIyLjc5eiIgZmlsbD0iI0VCQTU0NiIvPjxwYXRoIGQ9Ik04MC42OSA4Ni43OXMtMi40OTgtMjguNzIyIDkuOTktMzkuOTZjMCAwLTEwOS44OTMgMjYuNTM2LTg3LjcyNyAxMzcuNjc3IDAgMCAxMy4xMTIgNDAuNTg2IDMzLjcxNyA1MS44MjVsOC4xMTctNy44MDVzLTU2LjUwNy01Mi40NDktNi44NjgtMTE1LjgyNWMtLjMxMiAwIDE0LjM2LTE0Ljk4NSA0Mi43Ny0yNS45MTJ6IiBmaWxsPSIjMzIyRDZCIi8+PHBhdGggZD0iTTE4NS43NTYgMTE2Ljc1NXMyNi41MzcgMTEuMjM5IDMwLjU5NSAyNy40NzNjMCAwIDI4LjQxLTEwOS4yNjgtNzkuOTIyLTE0Mi4wNDkgMCAwLTQyLjE0Ni03LjQ5Mi02MS41MDIgNS4zMDhsMy4xMjIgMTAuOTI3czczLjA1My0yNS4yODggMTA1LjUyMiA0OC4zOWMtLjMxMiAwIDUuOTMxIDE5LjY2OCAyLjE4NSA0OS45NTF6IiBmaWxsPSIjN0M2NEE1Ii8+PHBhdGggZD0iTTE0NC43NDggNzcuMDAyYy05LjM2NiAxMC42MTQtMjUuNiAxMS41NTEtMzYuMjE1IDIuMTg1LTEwLjYxNC05LjM2Ni0xMS41NS0yNS42LTIuMTg1LTM2LjIxNCA5LjM2Ni0xMC42MTUgMjUuNi0xMS41NTIgMzYuMjE1LTIuMTg2IDEwLjYxNCA5LjM2NiAxMS41NTEgMjUuNiAyLjE4NSAzNi4yMTV6IiBmaWxsPSIjN0M2NEE1Ii8+PHBhdGggZD0iTTc5LjEzOSAxODMuMWMtOS4zNjYgMTAuNjE0LTI1LjYgMTEuNTUxLTM2LjIxNSAyLjE4NS0xMC42MTQtOS4zNjYtMTEuNTUxLTI1LjYtMS44NzMtMzYuMjE0IDkuMzY2LTEwLjYxNSAyNS42LTExLjU1MiAzNi4yMTUtMS44NzQgMTAuMzAyIDkuMDU0IDExLjIzOSAyNS4yODggMS44NzMgMzUuOTAzeiIgZmlsbD0iIzMyMkQ2QiIvPjxwYXRoIGQ9Ik0yMDAuOTQzIDE4Ni4yN2MtOS4zNjYgMTAuNjE1LTI1LjYgMTEuNTUxLTM2LjIxNCAyLjE4NS0xMC42MTUtOS4zNjUtMTEuNTUyLTI1LjYtMi4xODYtMzYuMjE0IDkuMzY2LTEwLjYxNSAyNS42LTExLjU1MSAzNi4yMTUtMi4xODYgMTAuNjE1IDkuMzY2IDExLjU1MSAyNS42IDIuMTg1IDM2LjIxNXoiIGZpbGw9IiNFQkE1NDYiLz48L3N2Zz4=
#
class anthill::puppetdb {

  # Configure puppetdb and its underlying database
  class { puppetdb:
    listen_address => $::fqdn
  }

  ensure_packages('apt-transport-https')

  Package['apt-transport-https'] -> Class[puppetdb]

  # Configure the Puppet master to use puppetdb
  class { puppetdb::master::config:
    puppetdb_server => $::fqdn
  }

}